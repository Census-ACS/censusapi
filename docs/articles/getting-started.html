<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="If you're new to censusapi, start here.
">
<title>Getting started with censusapi • censusapi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.2/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with censusapi">
<meta property="og:description" content="If you're new to censusapi, start here.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">censusapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting-started.html">Getting started with censusapi</a>
    <a class="dropdown-item" href="../articles/example-list.html">List of examples</a>
    <a class="dropdown-item" href="../articles/accessing-microdata.html">Accessing microdata</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hrecht/censusapi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting started with censusapi</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hrecht/censusapi/blob/HEAD/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><code>censusapi</code> is a lightweight package to get data from the
U.S. Census Bureau’s <a href="https://www.census.gov/developers/" class="external-link">APIs</a>. More than <a href="https://api.census.gov/data.html" class="external-link">1,000 Census API endpoints</a>
are available, including the Decennial Census, American Community
Survey, Poverty Statistics, Population Estimates, and Census microdata.
This package is designed to let you get data from all of those APIs
using the same main functions and syntax for every dataset.</p>
<p>This package returns the data as-is with the original variable names
created by the Census Bureau and any quirks inherent in the data. Each
dataset is a little different. Some are documented thoroughly, others
have documentation that is sparse. Sometimes variable names change
between years or geographies are added or dropped. This package can’t
overcome those challenges, but tries to make it easier to get the data
for use in your analysis. Make sure to thoroughly read the <a href="https://www.census.gov/data/developers/data-sets.html" class="external-link">documentation</a>
for your dataset and see below for how to <a href="#Other-ways-to-get-help">get help with Census data.</a></p>
<div class="section level2">
<h2 id="api-key-setup">API key setup<a class="anchor" aria-label="anchor" href="#api-key-setup"></a>
</h2>
<p>To use the Census APIs, <a href="http://api.census.gov/data/key_signup.html" class="external-link">sign up</a> for an API
key, which will be sent to your provided email address. You’ll need that
key to use this package. <code>censusapi</code> will use it by default
without any extra work on your part.</p>
<p>Within R, run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add key to .Renviron</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>CENSUS_KEY<span class="op">=</span><span class="va">YOURKEYHERE</span><span class="op">)</span></span>
<span><span class="co"># Reload .Renviron</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRenviron.html" class="external-link">readRenviron</a></span><span class="op">(</span><span class="st">"~/.Renviron"</span><span class="op">)</span></span>
<span><span class="co"># Check to see that the expected key is output in your R console</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CENSUS_KEY"</span><span class="op">)</span></span></code></pre></div>
<p>Once you’ve added your census key to your system environment,
censusapi will use it by default without any extra work on your
part.</p>
<p>In some instances you might not want to put your key in your
.Renviron - for example, if you’re on a shared school computer. You can
always choose to manually set <code>key = "YOURKEY"</code> as an
argument in <code><a href="../reference/getCensus.html">getCensus()</a></code> if you prefer.</p>
</div>
<div class="section level2">
<h2 id="finding-your-api">Finding your API<a class="anchor" aria-label="anchor" href="#finding-your-api"></a>
</h2>
<p>To get started, load the <code>censusapi</code> library.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.hrecht.com/censusapi/">censusapi</a></span><span class="op">)</span></span></code></pre></div>
<p>To see a current table of every available endpoint,
use<code><a href="../reference/listCensusApis.html">listCensusApis()</a></code>. This data frame includes useful
information for making your API call, including the dataset’s name,
description and title, as well as a contact email for questions about
the underlying data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">apis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusApis.html">listCensusApis</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">apis</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "title"       "name"        "vintage"     "type"        "temporal"   </span></span>
<span><span class="co">#&gt; [6] "url"         "modified"    "description" "contact"</span></span></code></pre>
<p>This returns useful information about each endpoint.</p>
<ul>
<li>title: Short written description of the dataset</li>
<li>name: Programmatic name of the dataset, to be used with
<code>censusapi</code>
</li>
<li>vintage: Year of the survey, for use with most endpoints</li>
<li>type: Dataset type, which is either Aggregate, Microdata, or
Timeseries</li>
<li>temporal: Time period of the dataset - only documented
sometimes</li>
<li>url: Base URL of the endpoint</li>
<li>modified: Date last modified</li>
<li>description: Long written description of the dataset</li>
<li>contact: Email address for specific questions about the Census
Bureau survey</li>
</ul>
<div class="section level3">
<h3 id="dataset-types">Dataset types<a class="anchor" aria-label="anchor" href="#dataset-types"></a>
</h3>
<p>There are three types of datasets included in the Census Bureau API
universe: aggregate, microdata, and timeseries. These type names were
defined by the Census Bureau and are included as a column in
<code><a href="../reference/listCensusApis.html">listCensusApis()</a></code>.</p>
<p>Most users will work with summary data, either aggregate or
timeseries datasets. Summary data contains pre-calculated numbers or
percentages for a given statistic — like the number of children in a
state or the median household income. The examples below and in the
broader <a href="https://www.hrecht.com/censusapi/articles/example-list.html">list
of censusapi examples</a> use summary data.</p>
<p>Aggregate datasets, like the American Community Survey or Decennial
Census, include data for only one time period, usually one year.
Datasets like the American Community Survey contain thousands of these
pre-computed variables.</p>
<p>Timeseries datasets, including the Small Area Income and Poverty
Estimates, the Quarterly Workforce Estimates, and International Trade
statistics, allow users to query data for more than one time period in
just one API call.</p>
<p>Microdata contains the individual-level responses for a survey for
use in custom analysis. One row represents one person. Only advanced
analysts will want to use microdata. Learn more about what microdata is
and how to use it with <code>censusapi</code> in <a href="https://www.hrecht.com/censusapi/articles/accessing-microdata.html">Accessing
microdata</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-getcensus">Using <code>getCensus</code><a class="anchor" aria-label="anchor" href="#using-getcensus"></a>
</h2>
<p>The main function in <code>censusapi</code> is
<code><a href="../reference/getCensus.html">getCensus()</a></code>, which makes an API call to a given Census API
and returns a data frame of results. Each API has slightly different
parameters, but there are always a few required arguments:</p>
<ul>
<li>
<code>name</code>: the programmatic name of the API as defined by
the Census, like “acs/acs5” or “timeseries/bds/firms”</li>
<li>
<code>vintage</code>: the dataset year, required for non-timeseries
APIs</li>
<li>
<code>vars</code>: a list of variables to retrieve</li>
<li>
<code>region</code>: the geography level to retrieve, like state or
county</li>
</ul>
<p>Some APIs have additional required or optional arguments, like
<code>time</code>, <code>monthly</code>, or <code>period</code>. Check
the specific <a href="https://www.census.gov/data/developers/data-sets.html" class="external-link">documentation</a>
for your API and explore its metadata with
<code><a href="../reference/listCensusMetadata.html">listCensusMetadata()</a></code> to see what options are allowed.</p>
<p>Let’s walk through an example getting uninsured rates by income group
using the <a href="https://www.census.gov/data/developers/data-sets/Health-Insurance-Statistics.html" class="external-link">Small
Area Health Insurance Estimates API</a>, which provides detailed annual
state-level and county-level estimates of health insurance rates for
people below age 65.</p>
<div class="section level3">
<h3 id="choosing-variables">Choosing variables<a class="anchor" aria-label="anchor" href="#choosing-variables"></a>
</h3>
<p><code>censusapi</code> includes a metadata function called
<code><a href="../reference/listCensusMetadata.html">listCensusMetadata()</a></code> to get information about an API’s
variable options and geography options. Let’s see what variables are
available in the SAHIE API:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>, </span>
<span>    type <span class="op">=</span> <span class="st">"variables"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sahie_vars</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="56%">
<col width="11%">
<col width="8%">
<col width="3%">
<col width="3%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">concept</th>
<th align="left">predicateType</th>
<th align="left">group</th>
<th align="left">limit</th>
<th align="left">required</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">NIPR_LB90</td>
<td align="left">Number in Demographic Group for Selected Income Range,
Lower Bound for 90% Confidence Interval</td>
<td align="left">Uncertainty Measure</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">NIPR_PT</td>
<td align="left">Number in Demographic Group for Selected Income Range,
Estimate</td>
<td align="left">Estimate</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">AGECAT</td>
<td align="left">Age Category</td>
<td align="left">Demographic ID</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">6</td>
<td align="left">default displayed</td>
</tr>
<tr class="even">
<td align="left">NIC_PT</td>
<td align="left">Number Insured, Estimate</td>
<td align="left">Estimate</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">GEOID</td>
<td align="left">State+County FIPS Code</td>
<td align="left">Uncertainty Measure</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">STATE</td>
<td align="left">State FIPS Code</td>
<td align="left">Geographic ID</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="choosing-regions">Choosing regions<a class="anchor" aria-label="anchor" href="#choosing-regions"></a>
</h3>
<p>We can also use <code>listCensusMetadata</code> to see which
geographic levels we can get data for using the SAHIE API.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>, </span>
<span>    type <span class="op">=</span> <span class="st">"geography"</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="9%">
<col width="14%">
<col width="8%">
<col width="18%">
<col width="12%">
<col width="12%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">geoLevelId</th>
<th align="left">limit</th>
<th align="left">referenceDate</th>
<th align="left">requires</th>
<th align="left">wildcard</th>
<th align="left">optionalWithWCFor</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">us</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">2015-01-01</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">county</td>
<td align="left">050</td>
<td align="left">3142</td>
<td align="left">2015-01-01</td>
<td align="left">state</td>
<td align="left">state</td>
<td align="left">state</td>
</tr>
<tr class="odd">
<td align="left">state</td>
<td align="left">040</td>
<td align="left">52</td>
<td align="left">2015-01-01</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<p>This API has three geographic levels: <code>us</code>,
<code>county</code> within states, and <code>state</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="making-a-censusapi-call">Making a censusapi call<a class="anchor" aria-label="anchor" href="#making-a-censusapi-call"></a>
</h2>
<p>First, using <code><a href="../reference/getCensus.html">getCensus()</a></code>, let’s get the percent
(<code>PCTUI_PT</code>) and number (<code>NUI_PT</code>) of people
uninsured, using the wildcard star (*) to retrieve data for all
counties.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_counties</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"PCTUI_PT"</span>, <span class="st">"NUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:*"</span>, </span>
<span>    time <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sahie_counties</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="right">PCTUI_PT</th>
<th align="right">NUI_PT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2019</td>
<td align="left">01</td>
<td align="left">001</td>
<td align="left">Autauga County, AL</td>
<td align="right">9.4</td>
<td align="right">4366</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">01</td>
<td align="left">003</td>
<td align="left">Baldwin County, AL</td>
<td align="right">10.9</td>
<td align="right">19085</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">01</td>
<td align="left">005</td>
<td align="left">Barbour County, AL</td>
<td align="right">13.0</td>
<td align="right">2194</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">01</td>
<td align="left">007</td>
<td align="left">Bibb County, AL</td>
<td align="right">11.0</td>
<td align="right">1824</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">01</td>
<td align="left">009</td>
<td align="left">Blount County, AL</td>
<td align="right">14.3</td>
<td align="right">6663</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">01</td>
<td align="left">011</td>
<td align="left">Bullock County, AL</td>
<td align="right">11.1</td>
<td align="right">752</td>
</tr>
</tbody>
</table>
</div>
<p>We can also get data on detailed income and demographic groups from
the SAHIE. We’ll use <code>region</code> to specify county-level results
and <code>regionin</code> to request uninsured rates by income group
(<code>IPRCAT</code>) for Virginia.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_virginia</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"IPRCAT"</span>, <span class="st">"IPR_DESC"</span>, <span class="st">"PCTUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:*"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:51"</span>, </span>
<span>    time <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sahie_virginia</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="6%">
<col width="7%">
<col width="8%">
<col width="25%">
<col width="8%">
<col width="30%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="left">IPRCAT</th>
<th align="left">IPR_DESC</th>
<th align="right">PCTUI_PT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2019</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">0</td>
<td align="left">All Incomes</td>
<td align="right">15.1</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">1</td>
<td align="left">&lt;= 200% of Poverty</td>
<td align="right">19.6</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">2</td>
<td align="left">&lt;= 250% of Poverty</td>
<td align="right">19.4</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">3</td>
<td align="left">&lt;= 138% of Poverty</td>
<td align="right">19.7</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">4</td>
<td align="left">&lt;= 400% of Poverty</td>
<td align="right">17.5</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">5</td>
<td align="left">138% to 400% of Poverty</td>
<td align="right">16.3</td>
</tr>
</tbody>
</table>
</div>
<p>Because the SAHIE API is a timeseries dataset (as indicated in its
name), we can get multiple years of data at once by changing
<code>time = X</code> to <code>time = "from X to Y"</code>. Let’s get
that data for DeKalb County, Georgia using county fips code 089 and
state fips code 13. You can look up fips codes on the <a href="https://www.census.gov/library/reference/code-lists/ansi.html" class="external-link">Census
Bureau website</a>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"PCTUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:089"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:13"</span>,</span>
<span>    time <span class="op">=</span> <span class="st">"from 2006 to 2019"</span><span class="op">)</span></span>
<span><span class="va">sahie_years</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="right">PCTUI_PT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2006</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">19.0</td>
</tr>
<tr class="even">
<td align="left">2007</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">17.2</td>
</tr>
<tr class="odd">
<td align="left">2008</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">22.5</td>
</tr>
<tr class="even">
<td align="left">2009</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">22.9</td>
</tr>
<tr class="odd">
<td align="left">2010</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">25.8</td>
</tr>
<tr class="even">
<td align="left">2011</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">23.9</td>
</tr>
<tr class="odd">
<td align="left">2012</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">21.7</td>
</tr>
<tr class="even">
<td align="left">2013</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">22.1</td>
</tr>
<tr class="odd">
<td align="left">2014</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">19.4</td>
</tr>
<tr class="even">
<td align="left">2015</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">16.9</td>
</tr>
<tr class="odd">
<td align="left">2016</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">15.3</td>
</tr>
<tr class="even">
<td align="left">2017</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">15.9</td>
</tr>
<tr class="odd">
<td align="left">2018</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">17.1</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">16.9</td>
</tr>
</tbody>
</table>
</div>
<p>We can also filter the data by income group using the
<code>IPRCAT</code> variable again. <code>IPRCAT</code> = 3 represents
&lt;=138% of the federal poverty line. That is the threshold for <a href="https://www.healthcare.gov/glossary/federal-poverty-level-fpl/" class="external-link">Medicaid
eligibility</a> in states that have expanded it under the Affordable
Care Act.</p>
<p>Getting this data for Los Angeles county (fips code 06037) we can see
the dramatic decrease in the uninsured rate in this income group after
California expanded Medicaid.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_138</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"PCTUI_PT"</span>, <span class="st">"NUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:037"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:06"</span>, </span>
<span>    IPRCAT <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    time <span class="op">=</span> <span class="st">"from 2010 to 2019"</span><span class="op">)</span></span>
<span><span class="va">sahie_138</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="right">PCTUI_PT</th>
<th align="right">NUI_PT</th>
<th align="left">IPRCAT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2010</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">37.4</td>
<td align="right">894385</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2011</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">35.1</td>
<td align="right">867577</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2012</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">34.4</td>
<td align="right">865516</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2013</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">33.0</td>
<td align="right">818978</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2014</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">24.9</td>
<td align="right">607542</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2015</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">17.8</td>
<td align="right">402977</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2016</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">15.4</td>
<td align="right">329251</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2017</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">14.3</td>
<td align="right">281842</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2018</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">13.9</td>
<td align="right">255520</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">15.1</td>
<td align="right">254740</td>
<td align="left">3</td>
</tr>
</tbody>
</table>
</div>
<p>We can also get data for other useful demographics, like age
group.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"PCTUI_PT"</span>, <span class="st">"NUI_PT"</span>, <span class="st">"AGECAT"</span>, <span class="st">"AGE_DESC"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:037"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:06"</span>,</span>
<span>    time <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span></span>
<span><span class="va">sahie_age</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="6%">
<col width="7%">
<col width="8%">
<col width="29%">
<col width="11%">
<col width="8%">
<col width="8%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="right">PCTUI_PT</th>
<th align="right">NUI_PT</th>
<th align="left">AGECAT</th>
<th align="left">AGE_DESC</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">11.1</td>
<td align="right">940376</td>
<td align="left">0</td>
<td align="left">Under 65 years</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">13.6</td>
<td align="right">864634</td>
<td align="left">1</td>
<td align="left">18 to 64 years</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">12.8</td>
<td align="right">406708</td>
<td align="left">2</td>
<td align="left">40 to 64 years</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">11.3</td>
<td align="right">208558</td>
<td align="left">3</td>
<td align="left">50 to 64 years</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">3.9</td>
<td align="right">85306</td>
<td align="left">4</td>
<td align="left">Under 19 years</td>
</tr>
<tr class="even">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">13.7</td>
<td align="right">822705</td>
<td align="left">5</td>
<td align="left">21 to 64 years</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="annotations">Annotations<a class="anchor" aria-label="anchor" href="#annotations"></a>
</h2>
<p>Some Census datasets, including the American Community Survey, use
annotated values. These values use numbers or symbols to indicate that
the data is unavailable, has been top coded, has an insufficient sample
size, or other noteworthy characteristics. Read more from the Census
Bureau on <a href="https://www.census.gov/data/developers/data-sets/acs-1year/notes-on-acs-estimate-and-annotation-values.html" class="external-link">ACS
annotation meanings</a> and <a href="https://www.census.gov/data/developers/data-sets/acs-1year/notes-on-acs-api-variable-types.html" class="external-link">ACS
variable types</a>.</p>
<p>The <code>censusapi</code> package is intended to return the data
as-is so that you can receive those unaltered annotations. If you are
using data for a small geography make sure to check for values like
<code>-666666666</code> or check the annotation columns for non-empty
values to exclude as needed.</p>
<p>As an example, we’ll get median income with associated annotations
and margin of error, for three census tracts in Washington, DC — one
that is available, one that is top coded, and one that is unavailable.
Notice that income is top coded at $250,000 — meaning any tract’s income
that is above that threshold is listed as $250,001. Some are not
available and are listed as -666666666. You can see these annotations in
the “EA” (estimate annotation) and “MA” (margin of error annotation)
columns.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acs_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"acs/acs5"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2020</span>, </span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B19013_001E"</span>, <span class="st">"B19013_001EA"</span>, <span class="st">"B19013_001M"</span>, <span class="st">"B19013_001MA"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"tract:006804,007703,000903"</span>,</span>
<span>    regionin <span class="op">=</span> <span class="st">"county:001&amp;state:11"</span><span class="op">)</span></span>
<span><span class="va">acs_income</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="8%">
<col width="10%">
<col width="10%">
<col width="17%">
<col width="18%">
<col width="17%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">state</th>
<th align="left">county</th>
<th align="left">tract</th>
<th align="right">B19013_001E</th>
<th align="left">B19013_001EA</th>
<th align="right">B19013_001M</th>
<th align="left">B19013_001MA</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">11</td>
<td align="left">001</td>
<td align="left">007703</td>
<td align="right">46156</td>
<td align="left">NA</td>
<td align="right">24087</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">11</td>
<td align="left">001</td>
<td align="left">000903</td>
<td align="right">250001</td>
<td align="left">250,000+</td>
<td align="right">-333333333</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="left">001</td>
<td align="left">006804</td>
<td align="right">-666666666</td>
<td align="left">-</td>
<td align="right">-222222222</td>
<td align="left">**</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="variable-groups">Variable groups<a class="anchor" aria-label="anchor" href="#variable-groups"></a>
</h2>
<p>For some surveys, particularly the American Community Survey and
Decennial Census, you can get many related variables at once using a
<code>group</code>, defined by the Census Bureau. In some other data
tools, like American FactFinder, this idea is referred to as a
<code>table</code>.</p>
<p>The American Community Survey (ACS) APIs include estimates (variable
names ending in “E”), annotations, margins of error, and statistical
significance, depending on the data set. Read more on <a href="https://www.census.gov/data/developers/data-sets/acs-5year.html" class="external-link">ACS
variable types</a> and annotation symbol meanings on the Census
website.</p>
<p>You can retrieve these annotation variables manually, by specifying a
list of variables. We’ll get the estimate, margin of error and
annotations for median household income in the past 12 months for Census
tracts in Alaska.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acs_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"acs/acs5"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2017</span>, </span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"B19013_001E"</span>, <span class="st">"B19013_001EA"</span>, <span class="st">"B19013_001M"</span>, <span class="st">"B19013_001MA"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"tract:*"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:02"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">acs_income</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="4%">
<col width="5%">
<col width="5%">
<col width="42%">
<col width="9%">
<col width="10%">
<col width="9%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">state</th>
<th align="left">county</th>
<th align="left">tract</th>
<th align="left">NAME</th>
<th align="right">B19013_001E</th>
<th align="left">B19013_001EA</th>
<th align="right">B19013_001M</th>
<th align="left">B19013_001MA</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">02</td>
<td align="left">068</td>
<td align="left">000100</td>
<td align="left">Census Tract 1, Denali Borough, Alaska</td>
<td align="right">83295</td>
<td align="left">NA</td>
<td align="right">6362</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">261</td>
<td align="left">000200</td>
<td align="left">Census Tract 2, Valdez-Cordova Census Area, Alaska</td>
<td align="right">95227</td>
<td align="left">NA</td>
<td align="right">22638</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">02</td>
<td align="left">261</td>
<td align="left">000300</td>
<td align="left">Census Tract 3, Valdez-Cordova Census Area, Alaska</td>
<td align="right">89000</td>
<td align="left">NA</td>
<td align="right">20435</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">261</td>
<td align="left">000100</td>
<td align="left">Census Tract 1, Valdez-Cordova Census Area, Alaska</td>
<td align="right">49076</td>
<td align="left">NA</td>
<td align="right">7165</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">02</td>
<td align="left">122</td>
<td align="left">000200</td>
<td align="left">Census Tract 2, Kenai Peninsula Borough, Alaska</td>
<td align="right">57694</td>
<td align="left">NA</td>
<td align="right">6526</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">122</td>
<td align="left">000800</td>
<td align="left">Census Tract 8, Kenai Peninsula Borough, Alaska</td>
<td align="right">50904</td>
<td align="left">NA</td>
<td align="right">3723</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<p>You can also retrieve also estimates and annotations for a group of
variables in one command. Here’s the <code>group</code> call for that
same table, <a href="https://api.census.gov/data/2016/acs/acs5/groups/B19013.html" class="external-link">B19013</a>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See descriptions of the variables in group B19013</span></span>
<span><span class="va">group_B19013</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"acs/acs5"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2017</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"variables"</span>,</span>
<span>    group <span class="op">=</span> <span class="st">"B19013"</span><span class="op">)</span></span>
<span><span class="va">group_B19013</span></span></code></pre></div>
<div class="kable-table">
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="45%">
<col width="33%">
<col width="5%">
<col width="2%">
<col width="2%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">concept</th>
<th align="left">predicateType</th>
<th align="left">group</th>
<th align="left">limit</th>
<th align="left">predicateOnly</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">B19013_001MA</td>
<td align="left">Annotation of Margin of Error!!Median household income
in the past 12 months (in 2017 inflation-adjusted dollars)</td>
<td align="left">MEDIAN HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2017
INFLATION-ADJUSTED DOLLARS)</td>
<td align="left">string</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">B19013_001EA</td>
<td align="left">Annotation of Estimate!!Median household income in the
past 12 months (in 2017 inflation-adjusted dollars)</td>
<td align="left">MEDIAN HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2017
INFLATION-ADJUSTED DOLLARS)</td>
<td align="left">string</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">B19013_001E</td>
<td align="left">Estimate!!Median household income in the past 12 months
(in 2017 inflation-adjusted dollars)</td>
<td align="left">MEDIAN HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2017
INFLATION-ADJUSTED DOLLARS)</td>
<td align="left">int</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">B19013_001M</td>
<td align="left">Margin of Error!!Median household income in the past 12
months (in 2017 inflation-adjusted dollars)</td>
<td align="left">MEDIAN HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2017
INFLATION-ADJUSTED DOLLARS)</td>
<td align="left">int</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acs_income_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"acs/acs5"</span>, </span>
<span>    vintage <span class="op">=</span> <span class="fl">2017</span>, </span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"group(B19013)"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"tract:*"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:02"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">acs_income_group</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="4%">
<col width="4%">
<col width="4%">
<col width="34%">
<col width="8%">
<col width="8%">
<col width="8%">
<col width="8%">
<col width="14%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">state</th>
<th align="left">county</th>
<th align="left">tract</th>
<th align="left">NAME</th>
<th align="right">B19013_001E</th>
<th align="left">B19013_001EA</th>
<th align="right">B19013_001M</th>
<th align="left">B19013_001MA</th>
<th align="left">GEO_ID</th>
<th align="right">NAME_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">02</td>
<td align="left">068</td>
<td align="left">000100</td>
<td align="left">Census Tract 1, Denali Borough, Alaska</td>
<td align="right">83295</td>
<td align="left">NA</td>
<td align="right">6362</td>
<td align="left">NA</td>
<td align="left">1400000US02068000100</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">261</td>
<td align="left">000200</td>
<td align="left">Census Tract 2, Valdez-Cordova Census Area, Alaska</td>
<td align="right">95227</td>
<td align="left">NA</td>
<td align="right">22638</td>
<td align="left">NA</td>
<td align="left">1400000US02261000200</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">02</td>
<td align="left">261</td>
<td align="left">000300</td>
<td align="left">Census Tract 3, Valdez-Cordova Census Area, Alaska</td>
<td align="right">89000</td>
<td align="left">NA</td>
<td align="right">20435</td>
<td align="left">NA</td>
<td align="left">1400000US02261000300</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">261</td>
<td align="left">000100</td>
<td align="left">Census Tract 1, Valdez-Cordova Census Area, Alaska</td>
<td align="right">49076</td>
<td align="left">NA</td>
<td align="right">7165</td>
<td align="left">NA</td>
<td align="left">1400000US02261000100</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">02</td>
<td align="left">122</td>
<td align="left">000200</td>
<td align="left">Census Tract 2, Kenai Peninsula Borough, Alaska</td>
<td align="right">57694</td>
<td align="left">NA</td>
<td align="right">6526</td>
<td align="left">NA</td>
<td align="left">1400000US02122000200</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">122</td>
<td align="left">000800</td>
<td align="left">Census Tract 8, Kenai Peninsula Borough, Alaska</td>
<td align="right">50904</td>
<td align="left">NA</td>
<td align="right">3723</td>
<td align="left">NA</td>
<td align="left">1400000US02122000800</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="advanced-geographies">Advanced geographies<a class="anchor" aria-label="anchor" href="#advanced-geographies"></a>
</h2>
<p>Some geographies, particularly Census tracts and blocks, need to be
specified within larger geographies like states and counties. This
varies by API endpoint, so make sure to read the documentation for your
specific API and run <code><a href="../reference/listCensusMetadata.html">listCensusMetadata()</a></code> to see the
available geographies.</p>
<p>You may want to get get data for many geographies that require a
parent geography. For example, tract-level data from the 2010 Decennial
Census can only be requested from one state at a time.</p>
<p>In this example, we use the built in <code>fips</code> list of state
<a href="https://www.census.gov/library/reference/code-lists/ansi.html" class="external-link">FIPS
codes</a> to request tract-level data from each state and join into a
single data frame.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tracts</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">fips</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">stateget</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"state:"</span>, <span class="va">f</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span></span>
<span>    <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"dec/sf1"</span>,</span>
<span>        vintage <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>        vars <span class="op">=</span> <span class="st">"P001001"</span>,</span>
<span>        region <span class="op">=</span> <span class="st">"tract:*"</span>,</span>
<span>        regionin <span class="op">=</span> <span class="va">stateget</span><span class="op">)</span></span>
<span>    <span class="va">tracts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">tracts</span>, <span class="va">temp</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tracts</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">state</th>
<th align="left">county</th>
<th align="left">tract</th>
<th align="right">P001001</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020100</td>
<td align="right">1912</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020500</td>
<td align="right">10766</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020300</td>
<td align="right">3373</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020400</td>
<td align="right">4386</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020200</td>
<td align="right">2170</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020600</td>
<td align="right">3668</td>
</tr>
</tbody>
</table>
</div>
<p>The <code>regionin</code> argument of <code><a href="../reference/getCensus.html">getCensus()</a></code> can
also be used with a string of nested geographies, as shown below.</p>
<p>The 2010 Decennial Census summary file 1 requires you to specify a
state and county to retrieve block-level data. Use <code>region</code>
to request block level data, and <code>regionin</code> to specify the
desired state and county.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2010</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"dec/sf1"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>    vars <span class="op">=</span> <span class="st">"P001001"</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"block:*"</span>,</span>
<span>    regionin <span class="op">=</span> <span class="st">"state:36+county:027+tract:010000"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data2010</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">state</th>
<th align="left">county</th>
<th align="left">tract</th>
<th align="left">block</th>
<th align="right">P001001</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1000</td>
<td align="right">31</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1011</td>
<td align="right">17</td>
</tr>
<tr class="odd">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1028</td>
<td align="right">41</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1001</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1031</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1002</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
</div>
<p>For many more examples and advanced topics check out <a href="https://www.hrecht.com/censusapi/articles/">all of the
articles</a>.</p>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<p>The APIs contain hundreds of API endpoints and dozens of datasets,
each of which work a little differently. The Census Bureau also makes
frequent updates, which unfortunately are not always announced in
advance. If you’re getting an error message or unexpected results, here
are some things to check.</p>
<div class="section level3">
<h3 id="variables">Variables<a class="anchor" aria-label="anchor" href="#variables"></a>
</h3>
<p>Use <code>listCensusMetadata(type = "variables")</code> on your
endpoint to see what variables are available. Occasionally the variable
names will change with data updates or API updates. Variable names
commonly change between ACS and Decennial survey years.</p>
<p>The Census APIs are case-sensitive, which means that if the variable
name you want is uppercase you’ll need to write it uppercase in your
request. Most of the APIs use uppercase variable names, but some use
lowercase and some even use sentence case.</p>
</div>
<div class="section level3">
<h3 id="geographies">Geographies<a class="anchor" aria-label="anchor" href="#geographies"></a>
</h3>
<p>Use <code>listCensusMetadata(type = "geographies")</code> on your
dataset to check which geographies you can use. Each API has its own
list of valid geographies and they occasionally change as the Census
Bureau makes updates.</p>
<p>If you’re specifying a region by FIPS code, for example
<code>state:01</code>, make sure to use the full code, padded with 0s if
necessary. The APIs did not always enforce this (previously,
<code>state:1</code> usually worked), but now they do. See the <a href="https://www.census.gov/library/reference/code-lists/ansi.html" class="external-link">Census
Bureau fIPS reference</a> for valid FIPS codes.</p>
</div>
<div class="section level3">
<h3 id="general">General<a class="anchor" aria-label="anchor" href="#general"></a>
</h3>
<p>Read the <a href="https://www.census.gov/data/developers/data-sets.html" class="external-link">online
documentation</a> for your dataset. Unfortunately, some information is
not included in the dataset metadata or webpage and is only available in
PDFs. These PDFs are linked on the Census Bureau’s online documentation
pages. Please check for PDF documentation.</p>
</div>
<div class="section level3">
<h3 id="unexpected-errors">Unexpected errors<a class="anchor" aria-label="anchor" href="#unexpected-errors"></a>
</h3>
<p>Occasionally you might get the general error message
<code>"There was an error while running your query.  We've logged the error and we'll correct it ASAP.  Sorry for the inconvenience."</code>
This comes from the Census Bureau and could be caused by any number of
problems, including server issues. Try rerunning your API call. If that
doesn’t work and you are requesting a large amount of data, try reducing
the amount that you’re requesting, for example getting data for only one
state at a time. If you’re still having trouble, see below for ways to
get help.</p>
</div>
<div class="section level3">
<h3 id="other-ways-to-get-help">Other ways to get help<a class="anchor" aria-label="anchor" href="#other-ways-to-get-help"></a>
</h3>
<ul>
<li>Open a <a href="https://github.com/hrecht/censusapi/issues" class="external-link">Github
issue</a> for bugs or issues with this R package.</li>
<li>Join the public Census Bureau <a href="http://links.govdelivery.com/track?type=click&amp;enid=ZWFzPTEmbWFpbGluZ2lkPTIwMTgwOTE3Ljk0OTc1NjkxJm1lc3NhZ2VpZD1NREItUFJELUJVTC0yMDE4MDkxNy45NDk3NTY5MSZkYXRhYmFzZWlkPTEwMDEmc2VyaWFsPTE3MjA3MjUwJmVtYWlsaWQ9aHJlY2h0MkBnbWFpbC5jb20mdXNlcmlkPWhyZWNodDJAZ21haWwuY29tJmZsPSZleHRyYT1NdWx0aXZhcmlhdGVJZD0mJiY=&amp;&amp;&amp;105&amp;&amp;&amp;https://join.slack.com/t/uscensusbureau/shared_invite/enQtMjQ3NzUyNTM3NDU3LTZmNGI1MmQzY2Y2ZTU1ODJhNDQwMmY2YmZiNmFkNzg4YmJkYmQzZjQyNDhkNDYxN2JhYjkxZDEwMGI2OGU5NzQ?eml=gd&amp;utm_medium=email&amp;utm_source=govdelivery" class="external-link">Slack
channel</a> and ask your question in the R or API rooms.</li>
<li>Email the Census Bureau API team at <a href="mailto:census.data@census.gov" class="email">census.data@census.gov</a> for questions relating to the
underlying data and APIs. Make sure to include the underlying API call
if you’re having trouble with a specific API request, not the R code.
You can see this API call in the <code>censusapi</code> error message.
You can also reach out to the contact listed in the dataset metadata
found in <code><a href="../reference/listCensusApis.html">listCensusApis()</a></code> for questions about a specific
survey.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hannah Recht.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
